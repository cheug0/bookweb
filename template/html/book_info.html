{{template "head.html" .}}

<div class="container">
    <section class="section">
        <div class="novel_info_main">
            <img src="{{cover .Article.ArticleID}}" alt="{{.Article.ArticleName}}" />
            <div class="novel_info_title">
                <h1>{{.Article.ArticleName}}</h1><i>作者：<a href="javascript:;">{{.Article.Author}}</a></i>
                <p>
                    <span>{{.SortName}}</span><span>{{formatSize .Article.Size}} 字</span>
                    {{if eq .Article.FullFlag 1}}<span class="fullflag">全本</span>{{else}}<span
                        class="fullflag">连载</span>{{end}}
                </p>

                <div class="flex to100">最新章节：<a
                        href="{{readUrl .Article.ArticleID .Article.LastChapterID}}">{{.Article.LastChapter}}</a><em
                        class="s_gray">{{formatDate .Article.LastUpdate}}</em></div>

                <p>相关推荐：
                    <a href="javascript:;">{{.Article.ArticleName}}免费阅读</a>&nbsp;
                    <a href="javascript:;">{{.Article.ArticleName}}全本在线观看</a>&nbsp;
                </p>

                <div class="flex">
                    {{if .Chapters}}
                    <a class="l_btn" href="{{readUrl .Article.ArticleID (index .Chapters 0).ChapterID}}"><i
                            class="fa fa-file-text"> 开始阅读</i></a>
                    {{end}}

                    <a class="l_btn_0" href="javascript:addToBookshelf({{.Article.ArticleID}});" rel="nofollow"><i
                            class="fa fa-heart"> 收藏本书</i></a>
                </div>
            </div>
        </div>

        <ul class="flex ulcard">
            <li class="act"><a id="a_info" href="javascript:a_info();">作品信息</a></li>
            <li><a id="a_catalog" href="javascript:a_catalog();">查看目录<span>（{{.ChapterCount}}章）</span></a></li>
        </ul>

        <div id="info">
            <div class="intro">
                <p>{{.Article.Intro}}</p>
            </div>
            <div class="section chapter_list">
                <div class="title jcc">《{{.Article.ArticleName}}》最新章节</div>
                <ul>
                    {{range .LatestChapters}}
                    <li><a href="{{readUrl $.Article.ArticleID .ChapterID}}"
                            title="{{$.Article.ArticleName}} {{.ChapterName}}">{{.ChapterName}}</a></li>
                    {{end}}
                </ul>
            </div>
        </div>

        <div id="catalog">
            <div class="section chapter_list">
                <ul id="ul_all_chapters">
                    {{range .Chapters}}
                    <li><a href="{{readUrl $.Article.ArticleID .ChapterID}}"
                            title="{{$.Article.ArticleName}} {{.ChapterName}}">{{.ChapterName}}</a></li>
                    {{end}}
                </ul>
            </div>
            <i id="gotop" class="fa fa-sign-in" onclick="gotop();"></i><i id="gofooter" class="fa fa-sign-in"
                onclick="gofooter();"></i>
        </div>
    </section>
</div>

<script>
    function a_info() {
        document.getElementById('info').style.display = 'block';
        document.getElementById('catalog').style.display = 'none';
        document.querySelector('.ulcard li:nth-child(1)').classList.add('act');
        document.querySelector('.ulcard li:nth-child(2)').classList.remove('act');
    }
    function a_catalog() {
        document.getElementById('info').style.display = 'none';
        document.getElementById('catalog').style.display = 'block';
        document.querySelector('.ulcard li:nth-child(1)').classList.remove('act');
        document.querySelector('.ulcard li:nth-child(2)').classList.add('act');
    }

    function addToBookshelf(articleid) {
        $.ajax({
            url: "/bookcase/add",
            type: "POST",
            data: { articleid: articleid },
            dataType: "json",
            success: function (res) {
                alert(res.message);
            },
            error: function () {
                alert("请求失败，请稍后重试");
            }
        });
    }
</script>

{{template "foot.html" .}}